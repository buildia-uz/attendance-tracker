<div id="reader"></div>

<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
<script>
    const apiUrl = '%%API_URL%%';
    function onScanSuccess(decodedText, decodedResult) {
        // Handle on success condition with the decoded text or result.
        console.log(`Code scanned = ${decodedText}`, decodedResult);

        // Example: POST request with fetch API
        fetch(apiUrl + '/api/record-attendance', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ data: decodedText }),
        })
        .then(response => response.json())
        .then(data => {
            console.log('Success:', data);
        })
        .catch((error) => {
            console.error('Error:', error);
        });
    }

    var html5QrcodeScanner = new Html5QrcodeScanner(
        "reader", { fps: 10, qrbox: 250 });
    html5QrcodeScanner.render(onScanSuccess);
</script>
